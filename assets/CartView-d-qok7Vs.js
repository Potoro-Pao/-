import{_ as P,L as M,m as S,h as L,T as m,r as c,o as a,c as l,a as p,e as t,D as _,F as g,y as V,B as A,E as C,G as b,A as i,C as y,z as f,w as v,b as u}from"./index-Kc8cdeaF.js";import{D as B}from"./DashboardDelModal-HB8Uo0T4.js";import{c as T}from"./cartStore-vbYV3YKm.js";import{S as $}from"./StepperComponent-VZBZhXIN.js";import{T as q}from"./ToastComponent-f3p7ZQNb.js";import"./axios-L6U4YIEh.js";const I={data(){return{message:"",bgClass:"",tempProduct:{},isLoading:this.loading,couponCode:"",toastBody:null,toastClass:"",defaultCouponValue:0}},components:{Loading:M,DashboardDelModal:B,StepperComponent:$,ToastComponent:q},computed:{...S(T,["cart","final_total","total","discount","refreshDiscount","loading"])},watch:{loading(o){this.isLoading=o}},methods:{openDelModal(o,e){this.tempProduct.title=o,this.tempProduct.id=e,this.$refs.dModal.openDeleteModal()},deleteProduct(o){this.removeCartItem(o),this.$refs.dModal.closeDeleteModal()},...L(T,["getCart","removeCartItem","changeCartQty","applyDiscount","deleteCart"]),applyCoupon(){if(this.cart.length===0){this.bgClass="bg-danger",this.message="Your shopping cart is empty",this.$refs.TToast.showToast();return}if(!this.couponCode){this.bgClass="bg-danger",this.message="Please enter the coupon code",this.$refs.TToast.showToast();return}if(this.couponCode!=="Reading"&&this.couponCode!=="Literature"){this.bgClass="bg-danger",this.message="Please enter the right coupon code",this.$refs.TToast.showToast();return}this.bgClass=this.couponCode==="Reading"?"bg-info":"bg-primary",this.message=`${this.couponCode} has been copied to clipboard!`,this.$nextTick(()=>{this.$refs.TToast&&this.$refs.TToast.showToast()}),this.applyDiscount(this.couponCode)},removeAllItems(){this.isLoading=this.loading,this.deleteCart()}},mounted(){this.getCart();const o=this.$refs.toast,e=this.$refs.invalidToast;this.toastBody=new m(o),this.invalidToast=new m(e)}},j={class:"position-fixed top-0 end-0 p-3",style:{"z-index":"11",top:"65px !important"}},E={class:"container my-5"},U={class:"container mt-4"},z={"aria-live":"polite","aria-atomic":"true",class:"position-fixed top-0 end-0 p-3",style:{"z-index":"11"}},N={ref:"toast",class:"toast",role:"alert","aria-live":"assertive","aria-atomic":"true"},R={ref:"invalidToast",class:"toast",role:"alert","aria-live":"assertive","aria-atomic":"true"},Y={class:"row"},Q={class:"col-lg-8"},F=t("h5",{class:"mb-3"},"Your Shopping Cart",-1),O={key:0},G={class:"row g-0"},H={class:"col-4 d-flex align-items-center justify-content-center p-2"},J=["src"],K={class:"col-8"},W={class:"card-body"},X={class:"card-title"},Z={class:"card-text"},tt={key:0,class:"text-muted"},st=t("br",null,null,-1),ot={class:"card-text"},et={class:"d-flex flex-wrap justify-content-between align-items-center"},nt={class:"btn-group me-2",role:"group","aria-label":"Quantity"},at=["onClick"],lt=["onUpdate:modelValue"],it=["onClick"],rt=["onClick"],ct={key:1,class:"alert alert-warning",role:"alert"},dt={class:"col-lg-4"},pt=t("h5",{class:"mb-3 mt-5"},"Apply Coupon",-1),ut={class:"input-group mb-3"},ht=t("div",{class:"mb-3"},[t("p",{class:"alert alert-info"},"Code: Reading"),t("p",{class:"alert alert-primary"},"Code: Literature")],-1),mt=t("h5",{class:"mb-3"},"Order Summary",-1),_t={class:"list-group"},gt={class:"list-group-item d-flex justify-content-between lh-sm"},Ct=t("div",null,"Subtotal:",-1),bt={key:0,class:"list-group-item d-flex justify-content-between lh-sm text-success"},yt=t("div",null,"Discount:",-1),ft={class:"list-group-item d-flex justify-content-between lh-sm"},vt=t("div",null,[t("strong",null,"Total:")],-1);function Tt(o,e,wt,kt,n,r){const w=c("loading"),k=c("ToastComponent"),x=c("StepperComponent"),h=c("router-link"),D=c("DashboardDelModal");return a(),l(g,null,[p(w,{active:n.isLoading,"onUpdate:active":e[0]||(e[0]=s=>n.isLoading=s)},null,8,["active"]),t("div",j,[p(k,{ref:"TToast",message:n.message,bgClass:n.bgClass},null,8,["message","bgClass"])]),t("div",E,[p(x,{currentStep:1})]),t("div",U,[t("div",z,[t("div",N,[t("div",{class:_(["toast-body",n.toastClass])}," Your coupon has been applied successfully! ",2)],512),t("div",R,[t("div",{class:_(["toast-body",n.toastClass])}," An error occurred. Please try again. ",2)],512)]),t("div",Y,[t("div",Q,[F,o.cart.length>0?(a(),l("div",O,[(a(!0),l(g,null,V(o.cart,s=>(a(),l("div",{key:s.id,class:"card mb-3"},[t("div",G,[t("div",H,[t("img",{src:s.product.imageUrl,class:"img-fluid",alt:"Item image",style:{"max-width":"80%",height:"auto"}},null,8,J)]),t("div",K,[t("div",W,[t("h6",X,i(s.product.title),1),t("p",Z,[s.product.origin_price>s.product.price?(a(),l("small",tt,[u(" Origin Price: "),t("del",null,"$"+i(s.product.origin_price),1)])):y("",!0),st,u(" Sale Price: $"+i(s.product.price),1)]),t("p",ot,[t("small",null,"Total: $"+i(s.product.price*s.qty),1)]),t("div",et,[t("div",nt,[t("button",{class:"btn btn-outline-secondary btn-sm",onClick:d=>s.qty>1?s.qty--:null}," - ",8,at),C(t("input",{type:"text",class:"form-control text-center","onUpdate:modelValue":d=>s.qty=d,readonly:"",style:{"max-width":"50px"}},null,8,lt),[[b,s.qty]]),t("button",{class:"btn btn-outline-secondary btn-sm",onClick:d=>{s.qty++,o.changeCartQty(s,s.qty)}}," + ",8,it)]),t("button",{class:"btn btn-danger btn-sm mt-4",onClick:d=>r.openDelModal(s.product.title,s.id)}," Remove ",8,rt)])])])])]))),128)),t("button",{type:"button",class:"btn btn-warning mt-2",onClick:e[1]||(e[1]=A((...s)=>r.removeAllItems&&r.removeAllItems(...s),["prevent"]))}," Clear Cart ")])):(a(),l("div",ct," Your cart is empty. "))]),t("div",dt,[pt,t("div",ut,[C(t("input",{type:"text",id:"couponCode","onUpdate:modelValue":e[2]||(e[2]=s=>n.couponCode=s),placeholder:"Enter coupon code",class:"form-control"},null,512),[[b,n.couponCode,void 0,{trim:!0}]]),t("button",{class:"btn btn-success",onClick:e[3]||(e[3]=(...s)=>r.applyCoupon&&r.applyCoupon(...s))}," Apply Coupon ")]),ht,mt,t("ul",_t,[t("li",gt,[Ct,t("div",null,"$"+i(o.total),1)]),o.discount?(a(),l("li",bt,[yt,t("div",null,"-$"+i(o.discount),1)])):y("",!0),t("li",ft,[vt,t("div",null,[t("strong",null,"$"+i(o.final_total),1)])])]),o.cart.length>0?(a(),f(h,{key:0,to:"/form",class:"btn btn-primary mt-3"},{default:v(()=>[u("Proceed to Checkout")]),_:1})):(a(),f(h,{key:1,to:"/products",class:"btn btn-secondary mt-3"},{default:v(()=>[u("Browse More Products")]),_:1}))])])]),p(D,{"temp-product":n.tempProduct,"delete-product":()=>r.deleteProduct(n.tempProduct.id),ref:"dModal"},null,8,["temp-product","delete-product"])],64)}const Vt=P(I,[["render",Tt]]);export{Vt as default};
