import{U as n}from"./index-Kc8cdeaF.js";import{a as o}from"./axios-L6U4YIEh.js";var d={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_API:"potoro",BASE_URL:"/VueMission1/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:i,VITE_API:e}=d,h=n("cartStore",{state:()=>({cart:[],final_total:0,total:0,discount:0,showToast:"",loading:!1}),actions:{getCart(){this.loading=!0;const t=`${i}/api/${e}/cart`;o.get(t).then(a=>{this.loading=!1,this.cart=a.data.data.carts,this.final_total=Math.floor(a.data.data.final_total),this.total=a.data.data.total,this.discount=this.total-this.final_total})},addToCart(t,a=1){const s=`${i}/api/${e}/cart`,r={product_id:t,qty:a};o.post(s,{data:r}).then(()=>{this.getCart()})},removeCartItem(t){this.loading=!0,o.delete(`${i}/api/${e}/cart/${t}`).then(()=>{this.getCart(),this.loading=!1})},deleteCart(){this.loading=!0;const t=`${i}/api/${e}/carts`;o.delete(t).then(()=>{this.loading=!1,this.deleteCartPinia()})},changeCartQty(t,a=1){const s={product_id:t.product_id,qty:a};o.put(`${i}/api/${e}/cart/${t.id}`,{data:s}).then(()=>{this.getCart()})},deleteCartPinia(){this.getCart()},applyDiscount(t){const a={data:{code:t}},s=`${i}/api/${e}/coupon`;o.post(s,a).then(r=>{this.final_total=Math.floor(r.data.data.final_total),this.discount=Math.floor(Math.abs(this.final_total-this.total))}).catch(()=>{})}}});export{h as c};
